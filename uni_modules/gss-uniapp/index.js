/*! For license information please see GSSAnalytics.js.LICENSE.txt */
var t={61:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(975)),o=i(n(906));function i(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var u=(t=t||{}).random||(t.rng||r.default)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,e)for(var s=0;s<16;++s)e[i+s]=u[s];return e||(0,o.default)(u)},t.exports=e.default},151:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},206:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},503:(t,e,n)=>{!function(){var e=n(939),r=n(151).utf8,o=n(206),i=n(151).bin,u=function(t,n){t.constructor==String?t=n&&"binary"===n.encoding?i.stringToBytes(t):r.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var s=e.bytesToWords(t),a=8*t.length,c=1732584193,f=-271733879,l=-1732584194,p=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[a>>>5]|=128<<a%32,s[14+(a+64>>>9<<4)]=a;var g=u._ff,y=u._gg,_=u._hh,m=u._ii;for(d=0;d<s.length;d+=16){var h=c,v=f,b=l,w=p;c=g(c,f,l,p,s[d+0],7,-680876936),p=g(p,c,f,l,s[d+1],12,-389564586),l=g(l,p,c,f,s[d+2],17,606105819),f=g(f,l,p,c,s[d+3],22,-1044525330),c=g(c,f,l,p,s[d+4],7,-176418897),p=g(p,c,f,l,s[d+5],12,1200080426),l=g(l,p,c,f,s[d+6],17,-1473231341),f=g(f,l,p,c,s[d+7],22,-45705983),c=g(c,f,l,p,s[d+8],7,1770035416),p=g(p,c,f,l,s[d+9],12,-1958414417),l=g(l,p,c,f,s[d+10],17,-42063),f=g(f,l,p,c,s[d+11],22,-1990404162),c=g(c,f,l,p,s[d+12],7,1804603682),p=g(p,c,f,l,s[d+13],12,-40341101),l=g(l,p,c,f,s[d+14],17,-1502002290),c=y(c,f=g(f,l,p,c,s[d+15],22,1236535329),l,p,s[d+1],5,-165796510),p=y(p,c,f,l,s[d+6],9,-1069501632),l=y(l,p,c,f,s[d+11],14,643717713),f=y(f,l,p,c,s[d+0],20,-373897302),c=y(c,f,l,p,s[d+5],5,-701558691),p=y(p,c,f,l,s[d+10],9,38016083),l=y(l,p,c,f,s[d+15],14,-660478335),f=y(f,l,p,c,s[d+4],20,-405537848),c=y(c,f,l,p,s[d+9],5,568446438),p=y(p,c,f,l,s[d+14],9,-1019803690),l=y(l,p,c,f,s[d+3],14,-187363961),f=y(f,l,p,c,s[d+8],20,1163531501),c=y(c,f,l,p,s[d+13],5,-1444681467),p=y(p,c,f,l,s[d+2],9,-51403784),l=y(l,p,c,f,s[d+7],14,1735328473),c=_(c,f=y(f,l,p,c,s[d+12],20,-1926607734),l,p,s[d+5],4,-378558),p=_(p,c,f,l,s[d+8],11,-2022574463),l=_(l,p,c,f,s[d+11],16,1839030562),f=_(f,l,p,c,s[d+14],23,-35309556),c=_(c,f,l,p,s[d+1],4,-1530992060),p=_(p,c,f,l,s[d+4],11,1272893353),l=_(l,p,c,f,s[d+7],16,-155497632),f=_(f,l,p,c,s[d+10],23,-1094730640),c=_(c,f,l,p,s[d+13],4,681279174),p=_(p,c,f,l,s[d+0],11,-358537222),l=_(l,p,c,f,s[d+3],16,-722521979),f=_(f,l,p,c,s[d+6],23,76029189),c=_(c,f,l,p,s[d+9],4,-640364487),p=_(p,c,f,l,s[d+12],11,-421815835),l=_(l,p,c,f,s[d+15],16,530742520),c=m(c,f=_(f,l,p,c,s[d+2],23,-995338651),l,p,s[d+0],6,-198630844),p=m(p,c,f,l,s[d+7],10,1126891415),l=m(l,p,c,f,s[d+14],15,-1416354905),f=m(f,l,p,c,s[d+5],21,-57434055),c=m(c,f,l,p,s[d+12],6,1700485571),p=m(p,c,f,l,s[d+3],10,-1894986606),l=m(l,p,c,f,s[d+10],15,-1051523),f=m(f,l,p,c,s[d+1],21,-2054922799),c=m(c,f,l,p,s[d+8],6,1873313359),p=m(p,c,f,l,s[d+15],10,-30611744),l=m(l,p,c,f,s[d+6],15,-1560198380),f=m(f,l,p,c,s[d+13],21,1309151649),c=m(c,f,l,p,s[d+4],6,-145523070),p=m(p,c,f,l,s[d+11],10,-1120210379),l=m(l,p,c,f,s[d+2],15,718787259),f=m(f,l,p,c,s[d+9],21,-343485551),c=c+h>>>0,f=f+v>>>0,l=l+b>>>0,p=p+w>>>0}return e.endian([c,f,l,p])};u._ff=function(t,e,n,r,o,i,u){var s=t+(e&n|~e&r)+(o>>>0)+u;return(s<<i|s>>>32-i)+e},u._gg=function(t,e,n,r,o,i,u){var s=t+(e&r|n&~r)+(o>>>0)+u;return(s<<i|s>>>32-i)+e},u._hh=function(t,e,n,r,o,i,u){var s=t+(e^n^r)+(o>>>0)+u;return(s<<i|s>>>32-i)+e},u._ii=function(t,e,n,r,o,i,u){var s=t+(n^(e|~r))+(o>>>0)+u;return(s<<i|s>>>32-i)+e},u._blocksize=16,u._digestsize=16,t.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(u(t,n));return n&&n.asBytes?r:n&&n.asString?i.bytesToString(r):e.bytesToHex(r)}}()},906:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.default=function(t,e){var r=e||0,o=n;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")},t.exports=e.default},939:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var o=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?n.push(e.charAt(o>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<t.length;o=++r%4)0!=o&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(r))>>>6-2*o);return n}},t.exports=n},975:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),r=new Uint8Array(16);t.exports=e.default}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r=n(503),o=n.n(r),i=n(61),u=n.n(i);function s(t){try{return uni.getStorageSync(t)}catch(t){return""}}function a(t,e){try{uni.setStorageSync(t,e)}catch(e){console.error(`Failed to set storage for key: ${t}`,e)}}function c(){if("undefined"!=typeof plus)return"app";if("undefined"!=typeof window&&window.location)return"h5";if("undefined"!=typeof uni)try{const t=uni.getAccountInfoSync();if(t?.miniProgram?.appId)return"mp"}catch(t){}return"unknown"}function f(){try{const t=getCurrentPages(),e=t[t.length-1];if(e){if(void 0!==e.$vm){const t=e.$vm;if(t.$options&&t.$options.name)return t.$options.name;if(t.title)return t.title}if(e.config&&e.config.navigationBarTitleText)return e.config.navigationBarTitleText;if(e.options&&e.options.title)return decodeURIComponent(e.options.title);if(e.route){const t=e.route.split("/");return t[t.length-1]||e.route}}return"undefined"!=typeof document&&document.title?document.title:""}catch(t){return console.error("Failed to get page title:",t),""}}let l=0;const p=t=>{let e=!1;return{onReachBottom:function(t){let e;return function(...n){clearTimeout(e),e=setTimeout((()=>t.apply(this,n)),300)}}((()=>{e||(t.track("scroll"),e=!0)}))}},d=t=>{const e=()=>{const e=c();if("h5"===e&&"undefined"!=typeof document&&document.addEventListener("click",(e=>{let n=e.target;for(;n&&"A"!==n.tagName&&(n=n.parentNode,n););if(n&&"A"===n.tagName){const e=n.getAttribute("href");e&&(e.startsWith("http")||e.startsWith("tel:")||e.startsWith("mailto:"))&&t.track("outbound",{url:e,type:"link"})}}),!0),"app"===e&&"undefined"!=typeof plus){const e=plus.runtime.openURL;plus.runtime.openURL=function(n,r,o){return t.track("outbound",{url:n,type:"native_url"}),e.call(this,n,r,o)}}if("mp"===e&&uni.navigateToMiniProgram){const e=uni.navigateToMiniProgram;uni.navigateToMiniProgram=function(n){return t.track("outbound",{appId:n.appId,path:n.path,type:"miniprogram"}),e.call(this,n)}}};return{onLaunch(){e()}}};async function g(){const t=await async function(){return new Promise((t=>{uni.getSystemInfo({success:e=>t(e),fail:()=>t({})})}))}(),{platform:e,language:n,screenWidth:r,screenHeight:i,windowWidth:u,windowHeight:a,screenColors:l="",model:p="",system:d=""}=t,g=getCurrentPages(),y=g[g.length-1],_=y?y.route:"",m=y?y.options:{},h=s("lf_app_id")||function(){const t=c();if("app"===t){const t=plus.runtime.appid||plus.runtime.manifest?.id;return t?`${t}_app.com`:"unknown_app.com"}if("h5"===t)return window.location.host;if("mp"===t){const t=uni.getAccountInfoSync();if(t?.miniProgram?.appId)return`${t.miniProgram.appId}_mp.com`}return"unknown_platform.com"}(),v=function(t,e,n={}){return`https://${t}${e.startsWith("/")?e:`/${e}`}${Object.keys(n).length?"?"+Object.entries(n).map((([t,e])=>`${t}=${e}`)).join("&"):""}`}(h,_,m),[b,w,T,$,x]=[s("lf_session_id"),s("lf_first_visit"),s("lf_prev_visit"),s("lf_this_visit"),s("lf_session_count")],S=o()(h),A=`${d} ${p}`.trim();return{_lfutma:`${S}.${b}.${w}.${T}.${$}.${x}`,_lfutmb:`${S}.${$}.${(new Date).getTime()}`,_lfutmc:`${S}`,r:v,v:"1.0.0",hn:h,sr:`${r}x${i}`,vp:`${u}x${a}`,ul:n,platform:e,user_agent:A,user_id:"",referer:"",sc:l||"24",dt:f()}}function y(t={}){let{traceid:e,user_id:n}=t;return a("lf_user_id",s("lf_user_id")||n),{track:(t,n)=>{const r={traceid:e,eventname:t,user_id:s("lf_user_id")||""};(function(t){if(!t||"object"!=typeof t||Array.isArray(t))return!1;const e=Object.getPrototypeOf(t);return!(!e||e!==Object.prototype)&&Object.keys(t).length>0})(n)&&(r.data=n),async function(t={}){const e=s("lf_prev_send_time")||(new Date).getTime(),n=(new Date).getTime();n-e>18e5&&function(){const t=s("lf_this_visit"),e=s("lf_session_count");a("lf_prev_visit",t),a("lf_this_visit",(new Date).getTime()),a("lf_session_count",Number.isNaN(Number(e))?1:Number(e)+1)}(),a("lf_prev_send_time",n);const r=(o={...await g(),...t},Object.keys(o).reduce(((t,e)=>{const n=o[e];return t[e]="object"==typeof n&&null!==n?JSON.stringify(n):n,t}),{}));var o;uni.request({url:"https://analytics.apps.seabroadnet.com/__utm.gif",method:"POST",data:r,header:{"content-type":"application/x-www-form-urlencoded"},fail:t=>{console.error("Failed to send event:",t)}})}(r)},setUserId:t=>{a("lf_user_id",t)}}}let _=null;const m={install(t,e={}){const{traceid:n,user_id:r,app_id:o,auto_send_pv:i=!0,auto_send_scroll:c=!1,auto_send_outbound:f=!1}=e;o&&a("lf_app_id",o),function(){if(!s("lf_first_visit")){const t=(new Date).getTime();a("lf_session_id",u()()),a("lf_first_visit",t),a("lf_prev_visit",t),a("lf_this_visit",t),a("lf_session_count",1)}}(),_=y({traceid:n,user_id:r}),(t=>t&&t.config&&t.version&&"3"===t.version.split(".")[0])(t)?t.config.globalProperties.$analytics=_:t.prototype.$analytics=_,i&&t.mixin((t=>({onShow:()=>{const e=getCurrentPages(),n=e[e.length-1];if(n&&n.route){const e=Date.now();e-l>300&&(t.track("pageView"),l=e)}}}))(_)),c&&t.mixin(p(_)),f&&t.mixin(d(_))}};function h(){if(!_)throw new Error("Analytics not properly initialized. Please make sure to call app.use(GSSAnalytics) first.");return _}const v=m;export{m as GSSAnalytics,v as default,h as useAnalytics};